#!/bin/bash

if [[ $EUID -ne 0 ]]; then
   echo "This script must be run as root" 1>&2
   exit 1
fi

echo "Choose the type of port scan for NMAP"
echo "1. All ports (-p-)"
echo "2. Top 1000 ports"
read port


echo "Choose the wordlist for GOBUSTER"
echo "1. Small"
echo "2. Medium"
read wordlist


echo "BASIC SCAN INITIATED"
echo "SCAN DATE: $(date '+%Y-%m-%d')"
echo "SCAN TIME: $(date +'%r')"
echo ""
echo "#####################################"
echo "############# NMAP SCAN #############"
echo "#####################################"
echo ""


if [[ $port -eq 1 ]]; then
	echo "Scanning for all the ports"
	sudo nmap -sS -sV -sC -p- -oN nmapresult.txt $1 | head -n -1 | tail -n +5
elif [[ $port -eq 2 ]]; then
	echo "Scanning for top 1000 ports"
	sudo nmap -sS -sV -sC --top-ports 1000 -oN nmapresult.txt $1 | head -n -1 | tail -n +5

else
	echo "Did not enter a valid port"
	echo "Nmap Scan Cancelled"
fi

printf "\n\n\n"
echo "######################################"
echo "############# NIKTO SCAN #############"
echo "######################################"
echo ""

nikto -h $1 -output niktoscan.txt

printf "\n\n\n"
echo "######################################"
echo "########### GOBUSTER SCAN ############"
echo "######################################"
echo ""

if [[ $wordlist -eq 1 ]]; then
	gobuster -w /usr/share/wordlists/dirbuster/directory-list-2.3-small.txt -q --url $1 -o gobustersmall.txt

elif [[ $wordlist -eq 2 ]]; then
	gobuster dir -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -q --url $1 -o gobustermedium.txt

else
	echo "Not a valid input"
	echo "Gobuster scan cancelled"
